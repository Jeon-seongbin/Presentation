# SGA

## Shared pool

### 모든 세션에서 공유되어지는 영역

* data dictionary cache
  - data dictionary 데이터 베이스 오브젝트으의 정의, 권한을 저장한다
  - 테이블에 어떤 정보가 있는지 담겨져 있다(컬럼, 권한유무, 존재하는지 유무)
  - 정보가 들어 있으므로 검색을 할 때 매번 디스크로 가서 테이블 자체를 체크 할 필요가 없다


### shared sql area
* Library cache
  - 실행 계획을 저장한다
  > 실행계획이라는게 실행을 하기 위해서 많은곳을 조회, 통계등을 하는데 그때 IO작업이 필요하다
  > 그렇지만 그 중에서도 유사한 질의에 동일한 실행계획을 사용하는것이 훨씬 효율적일 것이다
  - 이것을 위해 오라클은 이런 실행계획들(비슷한 것들) 라이브러리 캐시에 저장하여 다른 세션에서 참조 가능하게 하여 동일한 쿼리를 사용할 수 있게 한다
  
* result cache
  - 자주 사용되어지는 쿼리 결과가 저장된다
  - 첫번쨰 실행결과는 느린데, 두번세번 돌리면 빨라짐. 이게 다 결과 캐시에 저장되어서 그렇다
  - 동일한 결과를 내보내는 함수를 쓰면 이것도 결과 캐시에 저장되어진다
  > 많은 쿼리나 기능이 실행되느냐에 따라 결과캐시는 가장 일반적으로 사용되어지는 데이터를 저장한다
  > 가장 적게 사용되어진것은 삭제한다 
  >  > 쓸 때마다 자동으로 달라진다


  
- 다른영역


요약하자면, 기본적으로 shared pool 은
1. 쿼리가 적합한지 data dictionary cache를 확인하고, <br>
2. 이 쿼리에 대해 이전에 작성된 실행 계획이 있는지 Library cache를 검사한다.<br>
3. 만약 그렇다면, 그것은 그 계획을 직접적으로 사용한다. 그리고 이 쿼리에 대한 결과 캐시에 결과가 있는지 확인한다. <br>
4. 만약 그렇다면, 그것은 그 결과를 직접적으로 반환한다. 그리고 그렇지 않다면 실행 계획에 따라 디스크나 버퍼 캐시로 간다.<br>
5. 라이브러리 캐시에 실행 계획이 없을 경우, 새로운 실행 계획을 생성하고 새로운 계획과 함께 디스크나 버퍼 캐시로 이동한다.<br>
  
